{"pageProps":{"article":{"id":"kubernetes/service-discovery","filePath":"/home/runner/work/tglanz.github.io/tglanz.github.io/content/kubernetes/service-discovery.md","metadata":{"title":"Service Discovery","description":null,"permalink":null,"priority":0,"tags":["Kubernetes"],"categories":["Kubernetes"]},"content":{"raw":"\n# Service Discovery\n\nService discovery is a mean for applications to find one another in the cluster.\n\nThere are two major components to service discovery\n\n- Registration\n- Discovery\n\nService registration is when an application registers itself in a _service registry_.\n\nKubernetes uses its internal DNS as a _service registry_, and as we know, _Services_ are automatically registered with DNS.\n\nFor discovery to work, Kubernetes provides a well-known internal DNS services that are called the __cluster DNS__, in the namespace __kube-system__. Every _Pod_ in the cluster is automatically configured to where this service is. The relevant _Pods_ are managed by a _Deployment_ called __coredns__ and frontend by a _Service_ called __kube-dns__. \n\nFor illustration\n\n```\nkubectl get pods --namespace kube-system --selector k8s-app=kube-dns\n\nNAME                       READY   STATUS    RESTARTS   AGE\ncoredns-6d4b75cb6d-4lpv9   1/1     Running   0          139m\ncoredns-6d4b75cb6d-vmkfz   1/1     Running   0          139m\n\n```\n\nWe specify a _Service_ DNS using it's name (in the metadata)\n","html":"<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  </head>\n  <body>\n    <nav class=\"toc\">\n      <ol class=\"toc-level toc-level-1\">\n        <li class=\"toc-item toc-item-h1\"><a class=\"toc-link toc-link-h1\" href=\"#service-discovery\">Service Discovery</a></li>\n      </ol>\n    </nav>\n    <h1 id=\"service-discovery\">Service Discovery</h1>\n    <p>Service discovery is a mean for applications to find one another in the cluster.</p>\n    <p>There are two major components to service discovery</p>\n    <ul>\n      <li>Registration</li>\n      <li>Discovery</li>\n    </ul>\n    <p>Service registration is when an application registers itself in a <em>service registry</em>.</p>\n    <p>Kubernetes uses its internal DNS as a <em>service registry</em>, and as we know, <em>Services</em> are automatically registered with DNS.</p>\n    <p>For discovery to work, Kubernetes provides a well-known internal DNS services that are called the <strong>cluster DNS</strong>, in the namespace <strong>kube-system</strong>. Every <em>Pod</em> in the cluster is automatically configured to where this service is. The relevant <em>Pods</em> are managed by a <em>Deployment</em> called <strong>coredns</strong> and frontend by a <em>Service</em> called <strong>kube-dns</strong>.</p>\n    <p>For illustration</p>\n    <pre><code class=\"hljs language-angelscript\">kubectl <span class=\"hljs-keyword\">get</span> pods --<span class=\"hljs-keyword\">namespace</span> <span class=\"hljs-symbol\">kube</span>-<span class=\"hljs-symbol\">system</span> --<span class=\"hljs-symbol\">selector</span> <span class=\"hljs-symbol\">k8s</span>-<span class=\"hljs-symbol\">app</span>=<span class=\"hljs-symbol\">kube</span>-<span class=\"hljs-symbol\">dns</span>\n\n<span class=\"hljs-symbol\">NAME</span>                       <span class=\"hljs-symbol\">READY</span>   <span class=\"hljs-symbol\">STATUS</span>    <span class=\"hljs-symbol\">RESTARTS</span>   <span class=\"hljs-symbol\">AGE</span>\n<span class=\"hljs-symbol\">coredns</span>-<span class=\"hljs-symbol\">6d4b75cb6d</span>-<span class=\"hljs-symbol\">4lpv9</span>   <span class=\"hljs-symbol\">1</span>/<span class=\"hljs-symbol\">1</span>     <span class=\"hljs-symbol\">Running</span>   <span class=\"hljs-symbol\">0</span>          <span class=\"hljs-symbol\">139m</span>\n<span class=\"hljs-symbol\">coredns</span>-<span class=\"hljs-symbol\">6d4b75cb6d</span>-<span class=\"hljs-symbol\">vmkfz</span>   <span class=\"hljs-symbol\">1</span>/<span class=\"hljs-symbol\">1</span>     <span class=\"hljs-symbol\">Running</span>   <span class=\"hljs-symbol\">0</span>          <span class=\"hljs-symbol\">139m</span>\n\n</code></pre>\n    <p>We specify a <em>Service</em> DNS using it's name (in the metadata)</p>\n  </body>\n</html>\n"}}},"__N_SSG":true}