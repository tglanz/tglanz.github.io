{"pageProps":{"article":{"id":"posts/mariadb-notes","filePath":"/home/runner/work/tglanz.github.io/tglanz.github.io/next-legacy/content/posts/mariadb-notes.md","metadata":{"title":"MariaDB Notes","description":null,"priority":0,"tags":["MariaDB"],"categories":["Databases","Notes"],"toc":true},"content":{"raw":"\nEverything is well documented in the MySQL/MariaDB documentations, but i'll gather some stuff here which I frequently encounter.\n\n## variables inspection\n\nrun ```mysqladmin variables```\n\n## notable variables/configurations\n\n__data_dir__ - the data directory\n\n> usually ```/var/lib/mysql```\n\n__lower_case_table_names__ - as the name suggests, make all tables lower case.\n\n__local_infile__ - enable loading tables from local files.\n\n> for commands such as: ```mysqlimport --local --fields-terminated-by=\"|\" -h localhost some-file.csv```\n\n## configuration files\n\nat least on the machine i am currently at, the root configuration is at ```/etc/my.cnf```. in turn it includes ```/etc/my.cnf.d```.\n\nin there, ill edit configurations in ```/etc/my.cnf.d/server.cnf```.\n\nfor example; to have all tables names with lower case and enable local in files, ill add the following under ```[mysqld]```\n- lower_case_table_names=1\n- local_infile=1\n\n## datadir notes\n\nwe can check where it is configured to be at using the variables inspection above, but usually it is at ```/var/lib/mysql```.\n\nit should be owned by the user/group running the process; those are usually mysql/mysql, but we can check this as well. assuming we start the process using ```systemd```, open the service file, and check what are the ```User``` and ```Group``` configured to be. the service file on my machine is at ```/usr/lib/systemd/system/mariadb.service```\n\n## complete reboot\n\nstop mariadb service - ```systemctl stop mariadb```\n\ndelete contents of datadir -```rm -rf /var/lib/mysql/*```\n\nremake infrastructure files - ```mysql_install_db --user=mysql --ldata=/var/lib/mysql```\n\nstart mariadb service - ```systemctl start mariadb```\n\n> when we need such a thing?\n> for example; there are configurations that only apply on installation, such as ```lower_case_table_names```\n","html":"<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  </head>\n  <body>\n    <nav class=\"toc\">\n      <ol class=\"toc-level toc-level-1\">\n        <li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#variables-inspection\">variables inspection</a></li>\n        <li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#notable-variablesconfigurations\">notable variables/configurations</a></li>\n        <li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#configuration-files\">configuration files</a></li>\n        <li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#datadir-notes\">datadir notes</a></li>\n        <li class=\"toc-item toc-item-h2\"><a class=\"toc-link toc-link-h2\" href=\"#complete-reboot\">complete reboot</a></li>\n      </ol>\n    </nav>\n    <p>Everything is well documented in the MySQL/MariaDB documentations, but i'll gather some stuff here which I frequently encounter.</p>\n    <h2 id=\"variables-inspection\">variables inspection</h2>\n    <p>run <code>mysqladmin variables</code></p>\n    <h2 id=\"notable-variablesconfigurations\">notable variables/configurations</h2>\n    <p><strong>data_dir</strong> - the data directory</p>\n    <blockquote>\n      <p>usually <code>/var/lib/mysql</code></p>\n    </blockquote>\n    <p><strong>lower_case_table_names</strong> - as the name suggests, make all tables lower case.</p>\n    <p><strong>local_infile</strong> - enable loading tables from local files.</p>\n    <blockquote>\n      <p>for commands such as: <code>mysqlimport --local --fields-terminated-by=\"|\" -h localhost some-file.csv</code></p>\n    </blockquote>\n    <h2 id=\"configuration-files\">configuration files</h2>\n    <p>at least on the machine i am currently at, the root configuration is at <code>/etc/my.cnf</code>. in turn it includes <code>/etc/my.cnf.d</code>.</p>\n    <p>in there, ill edit configurations in <code>/etc/my.cnf.d/server.cnf</code>.</p>\n    <p>for example; to have all tables names with lower case and enable local in files, ill add the following under <code>[mysqld]</code></p>\n    <ul>\n      <li>lower_case_table_names=1</li>\n      <li>local_infile=1</li>\n    </ul>\n    <h2 id=\"datadir-notes\">datadir notes</h2>\n    <p>we can check where it is configured to be at using the variables inspection above, but usually it is at <code>/var/lib/mysql</code>.</p>\n    <p>it should be owned by the user/group running the process; those are usually mysql/mysql, but we can check this as well. assuming we start the process using <code>systemd</code>, open the service file, and check what are the <code>User</code> and <code>Group</code> configured to be. the service file on my machine is at <code>/usr/lib/systemd/system/mariadb.service</code></p>\n    <h2 id=\"complete-reboot\">complete reboot</h2>\n    <p>stop mariadb service - <code>systemctl stop mariadb</code></p>\n    <p>delete contents of datadir -<code>rm -rf /var/lib/mysql/*</code></p>\n    <p>remake infrastructure files - <code>mysql_install_db --user=mysql --ldata=/var/lib/mysql</code></p>\n    <p>start mariadb service - <code>systemctl start mariadb</code></p>\n    <blockquote>\n      <p>\n        when we need such a thing?\n        for example; there are configurations that only apply on installation, such as <code>lower_case_table_names</code>\n      </p>\n    </blockquote>\n  </body>\n</html>\n"}}},"__N_SSG":true}