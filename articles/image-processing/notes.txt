1:HL["/_next/static/media/a34f9d1faa5f3315-s.p.woff2","font",{"crossOrigin":"","type":"font/woff2"}]
2:HL["/_next/static/css/66d0883758355d1f.css","style",{"crossOrigin":""}]
0:["PrwyOGkWtyocbEqpUupQH",[[["",{"children":["articles",{"children":[["slug","image-processing/notes","c"],{"children":["__PAGE__?{\"slug\":[\"image-processing\",\"notes\"]}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/66d0883758355d1f.css","precedence":"next","crossOrigin":""}]],"$L4"]]]]
5:HL["/_next/static/css/1cb3813e458884a4.css","style",{"crossOrigin":""}]
6:I[5420,["326","static/chunks/326-dcee1ff54fa4f70c.js","185","static/chunks/app/layout-679af891320360de.js"],""]
7:I[6954,[],""]
8:I[7264,[],""]
b:I[8326,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","326","static/chunks/326-dcee1ff54fa4f70c.js","496","static/chunks/app/articles/%5B...slug%5D/page-44f6caefb92fad34.js"],""]
c:T518,M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z3:[null,["$","html",null,{"lang":"en","children":["$","body",null,{"className":"__className_d65c78 Layout_body__oXsmr","children":[["$","header",null,{"className":"Layout_header__XC_Gv","children":["$","$L6",null,{}]}],["$","main",null,{"className":"Layout_main__luTTh","children":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"initialChildNode":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","initialChildNode":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","articles","children",["slug","image-processing/notes","c"],"children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L8",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","initialChildNode":["$L9","$La",null],"childPropSegment":"__PAGE__?{\"slug\":[\"image-processing\",\"notes\"]}","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1cb3813e458884a4.css","precedence":"next","crossOrigin":""}]]}],"childPropSegment":["slug","image-processing/notes","c"],"styles":null}],"childPropSegment":"articles","styles":null}]}],["$","footer",null,{"children":["$","div",null,{"className":"Footer_container__Z8cUU","children":[["$","$Lb",null,{"href":"https://il.linkedin.com/in/tal-glanzman","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 448 512","children":["$undefined",[["$","path","0",{"d":"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z","children":"$undefined"}]]],"className":"$undefined","style":{"color":"$undefined"},"height":25,"width":25,"xmlns":"http://www.w3.org/2000/svg"}]}],["$","$Lb",null,{"href":"https://github.com/tglanz","children":["$","svg",null,{"stroke":"currentColor","fill":"currentColor","strokeWidth":"0","viewBox":"0 0 496 512","children":["$undefined",[["$","path","0",{"d":"$c","children":"$undefined"}]]],"className":"$undefined","style":{"color":"$undefined"},"height":25,"width":25,"xmlns":"http://www.w3.org/2000/svg"}]}]]}]}]]}]}],null]
4:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"Article"}],["$","meta","3",{"name":"description","content":"Personal site"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"256x256"}],["$","meta","5",{"name":"next-size-adjust"}]]
9:null
d:I[6222,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","326","static/chunks/326-dcee1ff54fa4f70c.js","496","static/chunks/app/articles/%5B...slug%5D/page-44f6caefb92fad34.js"],"ArticleContent"]
e:T2aa9,
# Halftoning

Reduce the quantization levels of some channel.

For example, 

- Reduce the grayscale image levels from 255 to 4
- Reduce the Red channel levels from 255 to 2

**Dithering**

Multiply each pixel and round it. Then compare pass a threshold matrix $\begin{bmatrix}
0 & 2\\\\3 & 1
\end{bmatrix}$ such that if the new pixel value is above it's corresponding matrix value, the new value will be white.

**Error Diffusion**

From top to bottom, left to right: Clam each pixel to it's nearest level and get the error (old value - new value). Spread this error to neighbouring, unvisited pixels by adding a fraction of the error ass follows: 7/16 east, 3/16 southwest, 5/16 south and 1/16 southeast.

# Color fundamentals

The pure colors defined by the CIE are the **R**ed, **G**reen and **B**lue. The human eye see colors are variable combination of these colors (as indicated in the book page 401).

# Fourier transform

### 2D DFT, Definition and properties

Summarized at p258-259

Definition of DFT and IDFT
$$
\mathcal{F}[f(x, y)] = \sum_{x=0}^{M-1} \sum_{y=0}^{N-1} f(x, y) e^{-2\pi i (ux/M + vu/N)}
\tag{4-67 @ p240}
$$

$$
\mathcal{F}^{-1}[F(u, v)] = \frac{1}{MN} \sum_{x=0}^{M-1} \sum_{y=0}^{N-1} F(u, v) e^{2\pi i (ux/M + vu/N)}
\tag{4-68 @ p240}
$$

Remember

- Linearity
- Derivative
- Unit impulse

**Duality**

If
$$
f(x) \Longleftrightarrow F(u)
$$

Then
$$
F(u) \Longleftrightarrow f(-x)
$$

Or equivalently, using the time reversal property
$$
F(-u) \Longleftrightarrow f(x)
$$

Proof: Assume $f(x) \Longleftrightarrow F(u)$. Then according to the inverse transform, ${f(t) = \int_{-\infty}^{\infty} F(u) e^{2\pi i ut}du}$.

Substitute $t = -x$ and get that ${f(-x) = \int_{-\infty}^{\infty} F(u) e^{-2\pi i ux}du}$ meaning that $\mathcal{F}[F(u)] = f(-x)$ as we wanted to show.

### 1D Convolution

Continuous
$$
(f \star h)(t) = \int_{\infty}^{\infty} f(\tau) h(t - \tau) d\tau
\tag{4-24 @ 214}
$$

**The Convolution Theorem**

Version 1
$$
(f \star h)(t) \Longleftrightarrow (H \cdot F)(u) \tag{4-25 @ p214}
$$

Version 2
$$
(f \cdot h)(t) \Longleftrightarrow (H \star F)(u)
$$

### 2D Convolution

The 2D discrete convolution
$$
(f \star h)(x, y) = \sum_{m=0}^{M-1} \sum_{n=0}^{N-1} f(m, n) (x - m, y - n)
\tag{4-94 @ 253}
$$

**The convolution theorem**

Version 1
$$
(f \star h)(x, y) \Longleftrightarrow (F \cdot H)(u, v)
\tag{4-95 @ 254}
$$

Version 2
$$
(f \cdot h)(x, y) \Longleftrightarrow \frac{1}{MN} (F \star H)(u, v)
$$

### Impulse, Sifting

Integral of impulse times a function is the impulse at the zero (or offset):

$$\int_{-\infty}^{\infty} f(t) \delta(t - t_0) dt = f(t_0) \tag{4-13 @ 208}$$

In the 2D discrete case

$$
\sum_{x=0}^{\infty} \sum_{y=0}^{\infty} f(x, y) \delta(x - x_0, y - y_0) = f(x_0, y_0)
\tag{4-58 @ 230}
$$

# Geometric transformation

### Affine transformation

An affine transformation $A$ is a transformation that _scale_, _rotate_, _translate_ or _sheer_.

It **translates triangles to triangles** and as such doesn't perserve angles between lines. It does however perserve parallelism.

To transform 2d vectors using $A$, we can represent the vectors using homogeneus coordinates and $A$ as a $3 \times 3$ matrix:

$$
\begin{bmatrix}
x'\\\\y'\\\\1
\end{bmatrix}
= A \begin{bmatrix}
x\\\\y\\\\1
\end{bmatrix}
= \begin{bmatrix}
a_{11} & a_{12} & a_{13}\\\\a_{21} & a_{22} & a_{23}\\\\0 & 0 & 1\\\\\end{bmatrix}
\begin{bmatrix}
x\\\\y\\\\1
\end{bmatrix}
\tag{2-45 @ p101}
$$

A list of the basic transformation can be found at **Table 2.3, page 102**. We can compose those basic operations using matrix multiplication (i.e. operator composition).

**Properties (ChatGPT)**

- _Line Preservation_: Straight lines remain straight. If two points are on a line, their transformed counterparts will also lie on a line.

- _Parallelism_: Parallel lines remain parallel after the transformation. Affine transformations do not affect the parallelism between lines.

- _Ratios of Distances_: The ratio of distances along a line remains constant. This means that an affine transformation preserves relative distances along a line, but not necessarily absolute distances.

- _Convexity_: A convex set remains convex after an affine transformation.

- _Midpoints_: The midpoint of a line segment remains the midpoint after the transformation.

- _Angles and Lengths are not preserved_: Angles and lengths are not generally preserved. Affine transformations can scale or distort the image, meaning angles between lines and the lengths of line segments can change.

### Projective transformation

Doesn't perserve parallelism.

p-146 at the workbook.

#### Perspective transformation

A subclass of a projective transformation the **translates squares to rectangles**.

# Compression

## Golomb

The benefit of Golomb is that it is optimial when the source has Exponential distribution ($\lambda e^{-\lambda x}$). 

Images don't have Exponential distribution so Golomb doesn't fit images (per-se) well.

# Morphological Filters

The complement of $A$ is denoted by $A^C$ and defined by 
$$
A^C = \{a | a \notin A \}
$$

The subtraction of $B$ from $A$ is defined by
$$
A - B = \{ a | a \in A \land a \notin B \}
$$

The translation of $A$ by $z$ is defined by
$$
(A)_z = \{ a + z | a \in A \}
$$

The reflection of $B$ is defined by
$$
\hat{B} = \{ -b | b \in B \}
$$

## Dialation

The dialation is defined by
$$
A \oplus B = \{ z | (\hat{B}_z) \cap A \neq \phi \}
$$

The dialation is the set of points $z$ such that the reflected filter $B$, translated by $z$, touches $A$.

Below are some properties of the dialation. The way we prove those illustrate the standard way to prove such things in this context.

**Commutativity**

The dialation is commutative, i.e. $A \oplus B = B \oplus A$.

Let $x \in A \oplus B$. By definition, $(\hat{B})_x \cap A \neq \phi$.

Therefore, there exists $a \in A$ and $b \in B$ such that $-b + x = a$.

We will rearrange the above equation to get $-a + x = b$.

> This equation means that if we take some a, reflect it, translate it by x, we get something in B.

We understand from the above that $(\hat{A})_x \cap B \neq \phi$.

Therefore $x \in B \oplus A$.

The proof is analogue to the other side.

From containment from both sides we deduce equality.

**Associativity**

We want to show that ${(A \oplus B) \oplus C = A \oplus (B \oplus C)}$.

Let $x \in (A \oplus B) \oplus C$. By definition, there are $c \in C$ and $y \in A \oplus B$ such that $-c + x = y$.

Therefore, by definition there is $b \in B$ and $a \in A$ such that $-b + y = a$.

By substituting $y$ we get that $-b - c + x = a$. Let $z = b + c$ and note that we now get that $-z + x = a$.

Also note that $b = -c + c + b = -c + z$ so $z \in B \oplus C$.

From the above, we conclude that $x \in A \oplus (B \oplus C)$.

## Erosion

Erosion is defined by:

$A \ominus B = \{ z | (B)_z \cap A^C = \phi \}$

Or equivelantly

$A \ominus B = \{ z | (B)_z \subseteq A \}$

**Question:** Prove that $A \ominus B = \bigcap_{b\in B} (A)_{-b}$.

Proof: Let $x \in A \ominus B$. By definition, for all $b \in B$, $b + x \in A$. For all $b \in B$, there is some $a_b \in A$ such that $x + b = a_b$.

It means that $x = a_b + (-b)$, i.e. $x \in (A)_{-b}$.

It applies reading backwards as well so its an "iff".

# Other stuff

## Logs

Change of base
$$
log_b(a) = \frac{log_x(a)}{log_x(b)}
$$

For example, assume you have $\log_2 (qp_i)$, then to transform it to $ln$ you'd write
$$
\log_2 (qp_i) = \frac{\ln (qp_i)}{ \ln 2}
$$

## Prove the discrete, 1D convolution theorem

Given $f(x)$ and $h(x)$ we want to show that
$$
\mathcal{F}[f \star h] = \mathcal{F}[F] \cdot \mathcal{F}[H]
$$

Let $g(x) = f(x) \star h(x) = \sum_{c=0}^{N-1} f(c) h(x - c)$ according to 4-94.

$$
\hat{g}(u)  = \
\sum_{x=0}^{N-1} \sum_{c=0}^{N-1} f(c) h(x - c) e^{-2 \pi i xc/N} = \
\sum_{c=0}^{N-1} f(c) \sum_{x=0}^{N-1} h(x - c) e^{-2 \pi i xc/N} = \
\sum_{c=0}^{N-1} f(c) \mathcal{F}[h(x-c)]
$$

From translation property (3 @ p259) we know that
${\mathcal{F}[h(x-c)] = \hat{h}(x) e^{-2\pi i xc/N}}$ so

$$
\hat{g}(u) = \
\sum_{c=0}^{N-1} f(c) \hat{h}(x) e^{-2\pi i xc/N} = \
\hat{h}(x) \sum_{c=0}^{N-1} f(c) e^{-2\pi i xc/N} = \hat{h}(x) \cdot \hat{f}(x)
$$

## Prove that the fourier transform of a gaussian is a gaussian

We need to show that if
$$
\hat{f}(u, v) = e^{-(u^2 + v^2)/2\sigma^2}
$$

then
$$
f(x, y) = 2\pi\sigma^2 e^{-2\pi^2\sigma^2(x^2 + y^2)}
$$

Proof: By definitions of the Fourier Pair

$$
f(x, y)
= \mathcal{F}^{-1}[\hat{f}(u, x)]
= \int_{-\infty}^{\infty} e^{- \frac{u^2 + v^2}{2 \sigma^2}} e^{j2\pi (ux + vy)} \mathrm{d}u \mathrm{d}v
= g(x) \cdot g(y)
$$

with $g(t)$ defined by:
$$
    g(t) = \int_{-\infty}^{\infty} e^{- \frac{\omega^2 - j4\pi\sigma^2t\omega}{2\sigma^2}} \mathrm{d}\omega
$$

Notice that by complementing to the square, we get that
$$
\omega^2 - j4\pi\sigma^2t\omega = (\omega - j2\pi\sigma^2 t)^2 + 4\pi^2\sigma^4 t^2
$$

and therefore
$$
g(t) 
= e^{- 2 \pi^2 \sigma^2 t^2} \cdot \int_{-\infty}^{\infty} e^{- \frac{(w - j2\pi \sigma t)^2}{2\sigma^2}} \mathrm{d}\omega
$$

By using the fact about Gaussian Integrals
$$
\int_{-\infty}^{\infty} e^{-a(t + b)^2}\mathrm{d}t = \sqrt{\frac{\pi}{a}}
$$

we compute
$$
\int_{-\infty}^{\infty} e^{- \frac{(\omega - j2\pi \sigma t)^2}{2 \sigma^2}} \mathrm{d}\omega = \sqrt{2 \sigma ^2 \pi} = \sigma \sqrt{2\pi}
$$

And we get that
$$
g(t) = \sigma \sqrt{2\pi} \cdot e^{- 2 \pi^2 \sigma^2 t^2}
$$

Finally, putting it all together we get that
$$
f(x, y) = g(x) \cdot g(y) = 2\pi \sigma^2 e^{- 2 \pi^2 \sigma^2 (x^2 + y^2)}
$$

as we wanted to show.

## Prove that $sinc(x) \star sinc(x) = sinc(x)$

Denote the box function in the interval $[-\frac{1}{2}, \frac{1}{2}]$ by
$$
g(t) = \begin{cases}
1 &  -\frac{1}{2} \leq t \leq \frac{1}{2}\\\\0 & otherwise
\end{cases}
$$

We have learnt in class (lecture 2 with $X = 1$) that $\mathcal{F}[g(t)] = sinc(f)$. Therefore, by the duality principle we get that

$$
\mathcal{F}[sinc(-t)] = g(f)
$$

and because

$$
sinc(-t) = \frac{sin (- \pi t)}{- \pi t} = \frac{- sin(\pi t)}{-\pi t} = \frac{sin(\pi t)}{\pi t} = sinc(t)
$$

we get that

$$
\mathcal{F}[sinc(t)] = g(f)
$$

Now, by the convolution theorem:

$$
sinc(t) \ast sinc(t) = \mathcal{F}^{-1}[g(f) \cdot g(f)] =\mathcal{F}^{-1}[g(f)] = sinc(t)
$$

as we wanted to show.

## Prove that the sum of the color is an interpolation on the C.D.

Given to colors $C_i = (X_i, Y_i, Z_i)$ and $C = C_1 + C_2$, with points $c_i$ and $c$ on the chromaticity diagram respectively, prove that there is $\lambda \in [0, 1]$ such that $c = \lambda c_1 + (1-\lambda c_2)$.

Proof: Denote $E_i = X_i + Y_i + Z_i$ and notice that $X_i = x_i E_i$ and $X = xE$. Because $C = C_1 + C_2$, we know that $X = X_1 + X_2$ so $xE = x_1 E_1 + x_2 E_2$  and after arrangement
$$
x = \frac{E_1}{E_1 + E_2} x_1 + \frac{E_2}{E_1 + E_2} x_2
$$

Denote $\lambda = \frac{E_1}{E_1 + E_2}$ and notice that $x = \lambda x_1 + (1-\lambda x_2)$.f:T4374,<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <nav class="toc">
      <ol class="toc-level toc-level-1">
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#halftoning">Halftoning</a></li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#color-fundamentals">Color fundamentals</a></li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#fourier-transform">Fourier transform</a></li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#geometric-transformation">Geometric transformation</a></li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#compression">Compression</a>
          <ol class="toc-level toc-level-2">
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#golomb">Golomb</a></li>
          </ol>
        </li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#morphological-filters">Morphological Filters</a>
          <ol class="toc-level toc-level-2">
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#dialation">Dialation</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#erosion">Erosion</a></li>
          </ol>
        </li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#other-stuff">Other stuff</a>
          <ol class="toc-level toc-level-2">
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#logs">Logs</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prove-the-discrete-1d-convolution-theorem">Prove the discrete, 1D convolution theorem</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prove-that-the-fourier-transform-of-a-gaussian-is-a-gaussian">Prove that the fourier transform of a gaussian is a gaussian</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prove-that-sincx-star-sincx--sincx">Prove that $sinc(x) \star sinc(x) = sinc(x)$</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#prove-that-the-sum-of-the-color-is-an-interpolation-on-the-cd">Prove that the sum of the color is an interpolation on the C.D.</a></li>
          </ol>
        </li>
      </ol>
    </nav>
    <h1 id="halftoning">Halftoning</h1>
    <p>Reduce the quantization levels of some channel.</p>
    <p>For example,</p>
    <ul>
      <li>Reduce the grayscale image levels from 255 to 4</li>
      <li>Reduce the Red channel levels from 255 to 2</li>
    </ul>
    <p><strong>Dithering</strong></p>
    <p>
      Multiply each pixel and round it. Then compare pass a threshold matrix $\begin{bmatrix}
      0 &#x26; 2\\3 &#x26; 1
      \end{bmatrix}$ such that if the new pixel value is above it's corresponding matrix value, the new value will be white.
    </p>
    <p><strong>Error Diffusion</strong></p>
    <p>From top to bottom, left to right: Clam each pixel to it's nearest level and get the error (old value - new value). Spread this error to neighbouring, unvisited pixels by adding a fraction of the error ass follows: 7/16 east, 3/16 southwest, 5/16 south and 1/16 southeast.</p>
    <h1 id="color-fundamentals">Color fundamentals</h1>
    <p>The pure colors defined by the CIE are the <strong>R</strong>ed, <strong>G</strong>reen and <strong>B</strong>lue. The human eye see colors are variable combination of these colors (as indicated in the book page 401).</p>
    <h1 id="fourier-transform">Fourier transform</h1>
    <h3 id="2d-dft-definition-and-properties">2D DFT, Definition and properties</h3>
    <p>Summarized at p258-259</p>
    <p>
      Definition of DFT and IDFT
      $$
      \mathcal{F}[f(x, y)] = \sum_{x=0}^{M-1} \sum_{y=0}^{N-1} f(x, y) e^{-2\pi i (ux/M + vu/N)}
      \tag{4-67 @ p240}
      $$
    </p>
    <p>
      $$
      \mathcal{F}^{-1}[F(u, v)] = \frac{1}{MN} \sum_{x=0}^{M-1} \sum_{y=0}^{N-1} F(u, v) e^{2\pi i (ux/M + vu/N)}
      \tag{4-68 @ p240}
      $$
    </p>
    <p>Remember</p>
    <ul>
      <li>Linearity</li>
      <li>Derivative</li>
      <li>Unit impulse</li>
    </ul>
    <p><strong>Duality</strong></p>
    <p>
      If
      $$
      f(x) \Longleftrightarrow F(u)
      $$
    </p>
    <p>
      Then
      $$
      F(u) \Longleftrightarrow f(-x)
      $$
    </p>
    <p>
      Or equivalently, using the time reversal property
      $$
      F(-u) \Longleftrightarrow f(x)
      $$
    </p>
    <p>Proof: Assume $f(x) \Longleftrightarrow F(u)$. Then according to the inverse transform, ${f(t) = \int_{-\infty}^{\infty} F(u) e^{2\pi i ut}du}$.</p>
    <p>Substitute $t = -x$ and get that ${f(-x) = \int_{-\infty}^{\infty} F(u) e^{-2\pi i ux}du}$ meaning that $\mathcal{F}[F(u)] = f(-x)$ as we wanted to show.</p>
    <h3 id="1d-convolution">1D Convolution</h3>
    <p>
      Continuous
      $$
      (f \star h)(t) = \int_{\infty}^{\infty} f(\tau) h(t - \tau) d\tau
      \tag{4-24 @ 214}
      $$
    </p>
    <p><strong>The Convolution Theorem</strong></p>
    <p>
      Version 1
      $$
      (f \star h)(t) \Longleftrightarrow (H \cdot F)(u) \tag{4-25 @ p214}
      $$
    </p>
    <p>
      Version 2
      $$
      (f \cdot h)(t) \Longleftrightarrow (H \star F)(u)
      $$
    </p>
    <h3 id="2d-convolution">2D Convolution</h3>
    <p>
      The 2D discrete convolution
      $$
      (f \star h)(x, y) = \sum_{m=0}^{M-1} \sum_{n=0}^{N-1} f(m, n) (x - m, y - n)
      \tag{4-94 @ 253}
      $$
    </p>
    <p><strong>The convolution theorem</strong></p>
    <p>
      Version 1
      $$
      (f \star h)(x, y) \Longleftrightarrow (F \cdot H)(u, v)
      \tag{4-95 @ 254}
      $$
    </p>
    <p>
      Version 2
      $$
      (f \cdot h)(x, y) \Longleftrightarrow \frac{1}{MN} (F \star H)(u, v)
      $$
    </p>
    <h3 id="impulse-sifting">Impulse, Sifting</h3>
    <p>Integral of impulse times a function is the impulse at the zero (or offset):</p>
    <p>$$\int_{-\infty}^{\infty} f(t) \delta(t - t_0) dt = f(t_0) \tag{4-13 @ 208}$$</p>
    <p>In the 2D discrete case</p>
    <p>
      $$
      \sum_{x=0}^{\infty} \sum_{y=0}^{\infty} f(x, y) \delta(x - x_0, y - y_0) = f(x_0, y_0)
      \tag{4-58 @ 230}
      $$
    </p>
    <h1 id="geometric-transformation">Geometric transformation</h1>
    <h3 id="affine-transformation">Affine transformation</h3>
    <p>An affine transformation $A$ is a transformation that <em>scale</em>, <em>rotate</em>, <em>translate</em> or <em>sheer</em>.</p>
    <p>It <strong>translates triangles to triangles</strong> and as such doesn't perserve angles between lines. It does however perserve parallelism.</p>
    <p>To transform 2d vectors using $A$, we can represent the vectors using homogeneus coordinates and $A$ as a $3 \times 3$ matrix:</p>
    <p>
      $$
      \begin{bmatrix}
      x'\\y'\\1
      \end{bmatrix}
      = A \begin{bmatrix}
      x\\y\\1
      \end{bmatrix}
      = \begin{bmatrix}
      a_{11} &#x26; a_{12} &#x26; a_{13}\\a_{21} &#x26; a_{22} &#x26; a_{23}\\0 &#x26; 0 &#x26; 1\\\end{bmatrix}
      \begin{bmatrix}
      x\\y\\1
      \end{bmatrix}
      \tag{2-45 @ p101}
      $$
    </p>
    <p>A list of the basic transformation can be found at <strong>Table 2.3, page 102</strong>. We can compose those basic operations using matrix multiplication (i.e. operator composition).</p>
    <p><strong>Properties (ChatGPT)</strong></p>
    <ul>
      <li>
        <p><em>Line Preservation</em>: Straight lines remain straight. If two points are on a line, their transformed counterparts will also lie on a line.</p>
      </li>
      <li>
        <p><em>Parallelism</em>: Parallel lines remain parallel after the transformation. Affine transformations do not affect the parallelism between lines.</p>
      </li>
      <li>
        <p><em>Ratios of Distances</em>: The ratio of distances along a line remains constant. This means that an affine transformation preserves relative distances along a line, but not necessarily absolute distances.</p>
      </li>
      <li>
        <p><em>Convexity</em>: A convex set remains convex after an affine transformation.</p>
      </li>
      <li>
        <p><em>Midpoints</em>: The midpoint of a line segment remains the midpoint after the transformation.</p>
      </li>
      <li>
        <p><em>Angles and Lengths are not preserved</em>: Angles and lengths are not generally preserved. Affine transformations can scale or distort the image, meaning angles between lines and the lengths of line segments can change.</p>
      </li>
    </ul>
    <h3 id="projective-transformation">Projective transformation</h3>
    <p>Doesn't perserve parallelism.</p>
    <p>p-146 at the workbook.</p>
    <h4 id="perspective-transformation">Perspective transformation</h4>
    <p>A subclass of a projective transformation the <strong>translates squares to rectangles</strong>.</p>
    <h1 id="compression">Compression</h1>
    <h2 id="golomb">Golomb</h2>
    <p>The benefit of Golomb is that it is optimial when the source has Exponential distribution ($\lambda e^{-\lambda x}$).</p>
    <p>Images don't have Exponential distribution so Golomb doesn't fit images (per-se) well.</p>
    <h1 id="morphological-filters">Morphological Filters</h1>
    <p>
      The complement of $A$ is denoted by $A^C$ and defined by
      $$
      A^C = {a | a \notin A }
      $$
    </p>
    <p>
      The subtraction of $B$ from $A$ is defined by
      $$
      A - B = { a | a \in A \land a \notin B }
      $$
    </p>
    <p>
      The translation of $A$ by $z$ is defined by
      $$
      (A)_z = { a + z | a \in A }
      $$
    </p>
    <p>
      The reflection of $B$ is defined by
      $$
      \hat{B} = { -b | b \in B }
      $$
    </p>
    <h2 id="dialation">Dialation</h2>
    <p>
      The dialation is defined by
      $$
      A \oplus B = { z | (\hat{B}_z) \cap A \neq \phi }
      $$
    </p>
    <p>The dialation is the set of points $z$ such that the reflected filter $B$, translated by $z$, touches $A$.</p>
    <p>Below are some properties of the dialation. The way we prove those illustrate the standard way to prove such things in this context.</p>
    <p><strong>Commutativity</strong></p>
    <p>The dialation is commutative, i.e. $A \oplus B = B \oplus A$.</p>
    <p>Let $x \in A \oplus B$. By definition, $(\hat{B})_x \cap A \neq \phi$.</p>
    <p>Therefore, there exists $a \in A$ and $b \in B$ such that $-b + x = a$.</p>
    <p>We will rearrange the above equation to get $-a + x = b$.</p>
    <blockquote>
      <p>This equation means that if we take some a, reflect it, translate it by x, we get something in B.</p>
    </blockquote>
    <p>We understand from the above that $(\hat{A})_x \cap B \neq \phi$.</p>
    <p>Therefore $x \in B \oplus A$.</p>
    <p>The proof is analogue to the other side.</p>
    <p>From containment from both sides we deduce equality.</p>
    <p><strong>Associativity</strong></p>
    <p>We want to show that ${(A \oplus B) \oplus C = A \oplus (B \oplus C)}$.</p>
    <p>Let $x \in (A \oplus B) \oplus C$. By definition, there are $c \in C$ and $y \in A \oplus B$ such that $-c + x = y$.</p>
    <p>Therefore, by definition there is $b \in B$ and $a \in A$ such that $-b + y = a$.</p>
    <p>By substituting $y$ we get that $-b - c + x = a$. Let $z = b + c$ and note that we now get that $-z + x = a$.</p>
    <p>Also note that $b = -c + c + b = -c + z$ so $z \in B \oplus C$.</p>
    <p>From the above, we conclude that $x \in A \oplus (B \oplus C)$.</p>
    <h2 id="erosion">Erosion</h2>
    <p>Erosion is defined by:</p>
    <p>$A \ominus B = { z | (B)_z \cap A^C = \phi }$</p>
    <p>Or equivelantly</p>
    <p>$A \ominus B = { z | (B)_z \subseteq A }$</p>
    <p><strong>Question:</strong> Prove that $A \ominus B = \bigcap_{b\in B} (A)_{-b}$.</p>
    <p>Proof: Let $x \in A \ominus B$. By definition, for all $b \in B$, $b + x \in A$. For all $b \in B$, there is some $a_b \in A$ such that $x + b = a_b$.</p>
    <p>It means that $x = a_b + (-b)$, i.e. $x \in (A)_{-b}$.</p>
    <p>It applies reading backwards as well so its an "iff".</p>
    <h1 id="other-stuff">Other stuff</h1>
    <h2 id="logs">Logs</h2>
    <p>
      Change of base
      $$
      log_b(a) = \frac{log_x(a)}{log_x(b)}
      $$
    </p>
    <p>
      For example, assume you have $\log_2 (qp_i)$, then to transform it to $ln$ you'd write
      $$
      \log_2 (qp_i) = \frac{\ln (qp_i)}{ \ln 2}
      $$
    </p>
    <h2 id="prove-the-discrete-1d-convolution-theorem">Prove the discrete, 1D convolution theorem</h2>
    <p>
      Given $f(x)$ and $h(x)$ we want to show that
      $$
      \mathcal{F}[f \star h] = \mathcal{F}[F] \cdot \mathcal{F}[H]
      $$
    </p>
    <p>Let $g(x) = f(x) \star h(x) = \sum_{c=0}^{N-1} f(c) h(x - c)$ according to 4-94.</p>
    <p>
      $$
      \hat{g}(u) =<br>\sum_{x=0}^{N-1} \sum_{c=0}^{N-1} f(c) h(x - c) e^{-2 \pi i xc/N} =<br>\sum_{c=0}^{N-1} f(c) \sum_{x=0}^{N-1} h(x - c) e^{-2 \pi i xc/N} =<br>\sum_{c=0}^{N-1} f(c) \mathcal{F}[h(x-c)]
      $$
    </p>
    <p>
      From translation property (3 @ p259) we know that
      ${\mathcal{F}[h(x-c)] = \hat{h}(x) e^{-2\pi i xc/N}}$ so
    </p>
    <p>
      $$
      \hat{g}(u) =<br>\sum_{c=0}^{N-1} f(c) \hat{h}(x) e^{-2\pi i xc/N} =<br>\hat{h}(x) \sum_{c=0}^{N-1} f(c) e^{-2\pi i xc/N} = \hat{h}(x) \cdot \hat{f}(x)
      $$
    </p>
    <h2 id="prove-that-the-fourier-transform-of-a-gaussian-is-a-gaussian">Prove that the fourier transform of a gaussian is a gaussian</h2>
    <p>
      We need to show that if
      $$
      \hat{f}(u, v) = e^{-(u^2 + v^2)/2\sigma^2}
      $$
    </p>
    <p>
      then
      $$
      f(x, y) = 2\pi\sigma^2 e^{-2\pi^2\sigma^2(x^2 + y^2)}
      $$
    </p>
    <p>Proof: By definitions of the Fourier Pair</p>
    <p>
      $$
      f(x, y)
      = \mathcal{F}^{-1}[\hat{f}(u, x)]
      = \int_{-\infty}^{\infty} e^{- \frac{u^2 + v^2}{2 \sigma^2}} e^{j2\pi (ux + vy)} \mathrm{d}u \mathrm{d}v
      = g(x) \cdot g(y)
      $$
    </p>
    <p>
      with $g(t)$ defined by:
      $$
      g(t) = \int_{-\infty}^{\infty} e^{- \frac{\omega^2 - j4\pi\sigma^2t\omega}{2\sigma^2}} \mathrm{d}\omega
      $$
    </p>
    <p>
      Notice that by complementing to the square, we get that
      $$
      \omega^2 - j4\pi\sigma^2t\omega = (\omega - j2\pi\sigma^2 t)^2 + 4\pi^2\sigma^4 t^2
      $$
    </p>
    <p>
      and therefore
      $$
      g(t)
      = e^{- 2 \pi^2 \sigma^2 t^2} \cdot \int_{-\infty}^{\infty} e^{- \frac{(w - j2\pi \sigma t)^2}{2\sigma^2}} \mathrm{d}\omega
      $$
    </p>
    <p>
      By using the fact about Gaussian Integrals
      $$
      \int_{-\infty}^{\infty} e^{-a(t + b)^2}\mathrm{d}t = \sqrt{\frac{\pi}{a}}
      $$
    </p>
    <p>
      we compute
      $$
      \int_{-\infty}^{\infty} e^{- \frac{(\omega - j2\pi \sigma t)^2}{2 \sigma^2}} \mathrm{d}\omega = \sqrt{2 \sigma ^2 \pi} = \sigma \sqrt{2\pi}
      $$
    </p>
    <p>
      And we get that
      $$
      g(t) = \sigma \sqrt{2\pi} \cdot e^{- 2 \pi^2 \sigma^2 t^2}
      $$
    </p>
    <p>
      Finally, putting it all together we get that
      $$
      f(x, y) = g(x) \cdot g(y) = 2\pi \sigma^2 e^{- 2 \pi^2 \sigma^2 (x^2 + y^2)}
      $$
    </p>
    <p>as we wanted to show.</p>
    <h2 id="prove-that-sincx-star-sincx--sincx">Prove that $sinc(x) \star sinc(x) = sinc(x)$</h2>
    <p>
      Denote the box function in the interval $[-\frac{1}{2}, \frac{1}{2}]$ by
      $$
      g(t) = \begin{cases}
      1 &#x26; -\frac{1}{2} \leq t \leq \frac{1}{2}\\0 &#x26; otherwise
      \end{cases}
      $$
    </p>
    <p>We have learnt in class (lecture 2 with $X = 1$) that $\mathcal{F}[g(t)] = sinc(f)$. Therefore, by the duality principle we get that</p>
    <p>
      $$
      \mathcal{F}[sinc(-t)] = g(f)
      $$
    </p>
    <p>and because</p>
    <p>
      $$
      sinc(-t) = \frac{sin (- \pi t)}{- \pi t} = \frac{- sin(\pi t)}{-\pi t} = \frac{sin(\pi t)}{\pi t} = sinc(t)
      $$
    </p>
    <p>we get that</p>
    <p>
      $$
      \mathcal{F}[sinc(t)] = g(f)
      $$
    </p>
    <p>Now, by the convolution theorem:</p>
    <p>
      $$
      sinc(t) \ast sinc(t) = \mathcal{F}^{-1}[g(f) \cdot g(f)] =\mathcal{F}^{-1}[g(f)] = sinc(t)
      $$
    </p>
    <p>as we wanted to show.</p>
    <h2 id="prove-that-the-sum-of-the-color-is-an-interpolation-on-the-cd">Prove that the sum of the color is an interpolation on the C.D.</h2>
    <p>Given to colors $C_i = (X_i, Y_i, Z_i)$ and $C = C_1 + C_2$, with points $c_i$ and $c$ on the chromaticity diagram respectively, prove that there is $\lambda \in [0, 1]$ such that $c = \lambda c_1 + (1-\lambda c_2)$.</p>
    <p>
      Proof: Denote $E_i = X_i + Y_i + Z_i$ and notice that $X_i = x_i E_i$ and $X = xE$. Because $C = C_1 + C_2$, we know that $X = X_1 + X_2$ so $xE = x_1 E_1 + x_2 E_2$ and after arrangement
      $$
      x = \frac{E_1}{E_1 + E_2} x_1 + \frac{E_2}{E_1 + E_2} x_2
      $$
    </p>
    <p>Denote $\lambda = \frac{E_1}{E_1 + E_2}$ and notice that $x = \lambda x_1 + (1-\lambda x_2)$.</p>
  </body>
</html>
a:["$","div",null,{"className":"article-page_container__5yaZl","children":[["$","h1",null,{"children":"Image processing, Notes"}],["$","div",null,{"className":"Taxonomy_container__C2Vdb","children":["$","div",null,{"className":"Taxonomy_values__yvK16","children":[["$","$Lb","0",{"href":"/tags/Image_Processing","children":["$","div",null,{"className":"Chip_container__q1AW2","children":"Image Processing"}]}]]}]}],["$","$Ld",null,{"content":{"raw":"$e","html":"$f"}}]]}]
