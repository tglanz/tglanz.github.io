<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/66d0883758355d1f.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/1cb3813e458884a4.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-91d24a11915ed1c5.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-672a444f700a8e5a.js" async="" crossorigin=""></script><script src="/_next/static/chunks/472-7e5eafffd19dca44.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-d355f2bc91b5bf25.js" async="" crossorigin=""></script><script src="/_next/static/chunks/326-dcee1ff54fa4f70c.js" async=""></script><script src="/_next/static/chunks/app/layout-679af891320360de.js" async=""></script><script src="/_next/static/chunks/d3ac728e-1e5d8b71e3d43fec.js" async=""></script><script src="/_next/static/chunks/app/articles/%5B...slug%5D/page-44f6caefb92fad34.js" async=""></script><title>Article</title><meta name="description" content="Personal site"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="256x256"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_d65c78 Layout_body__oXsmr"><header class="Layout_header__XC_Gv"><div class="NavBar_container__pKdC7"><a class="link" href="/">Home</a><a class="link" href="/academic">Academic Work</a><a class="link" href="/categories">Categories</a><a class="link" href="/articles">All</a><a class="link" href="/articles/about">About</a></div></header><main class="Layout_main__luTTh"><div class="article-page_container__5yaZl"><h1>Kafka</h1><div class="ArticleContent_md__SxPPI"><!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <nav class="toc">
      <ol class="toc-level toc-level-1">
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#overview">Overview</a>
          <ol class="toc-level toc-level-2">
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#what-is-kafka">What is kafka?</a></li>
          </ol>
        </li>
        <li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#high-level-concepts">High level concepts</a>
          <ol class="toc-level toc-level-2">
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#communication-model">Communication model</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#core-components">Core components</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#storage">Storage</a></li>
            <li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#the-cluster">The Cluster</a></li>
          </ol>
        </li>
      </ol>
    </nav>
    <h1 id="overview">Overview</h1>
    <h2 id="what-is-kafka">What is kafka?</h2>
    <blockquote>
      <p>Kafka is a streamsing platform for ingesting, storing, accessing and processing streams of data</p>
    </blockquote>
    <h1 id="high-level-concepts">High level concepts</h1>
    <h2 id="communication-model">Communication model</h2>
    <p>On the contrary of a <strong>Directed Communication</strong> where every service is aware of the other process to send messages to, kafka provides a centralized hub in which processes can send and receieve messages without being aware of each other. Such communication model is known as the <strong>Publish/Subscribe</strong> model which enhance the decoupling between different processes.</p>
    <blockquote>
      <p>Of course those are not termed by kafka</p>
    </blockquote>
    <blockquote>
      <p>Recall the different communication formalization according the sync/async and persistent/transient dimensions. Kafka fills conforms to the asynchronous and persisted model. This is unintuitive since this model is usually used for classical <strong>Queues</strong> rather than <strong>Pubsubs</strong>.</p>
    </blockquote>
    <h2 id="core-components">Core components</h2>
    <p>A <strong>Topic</strong> is a named stream of data (/ channel - CSP?).</p>
    <p><strong>Producer</strong>s are processes that publish data to a Topic.</p>
    <p><strong>Consumer</strong>s are processes that subscribe to data in one or more Topics.</p>
    <p>A <strong>Consumer Group</strong> is a set of Consumers that work together as a group.</p>
    <h2 id="storage">Storage</h2>
    <h3 id="commit-log">Commit Log</h3>
    <p>A <strong>Commit Log</strong> is an append only data structure which contain an <em>Ordered Sequence</em> of events (/records)</p>
    <ul>
      <li>Records in the log are immutable</li>
      <li>Records are ordered and their ordinal is known as their <strong>Offset</strong></li>
    </ul>
    <blockquote>
      <p>It is very similiar to existing transaction logs (Redo Log especially) which can be found in classical Relational Databases.</p>
    </blockquote>
    <blockquote>
      <p>To gain perspectives we can find similiarities to STM concurrency mode, Redux stores etc...</p>
    </blockquote>
    <h3 id="partitions">Partitions</h3>
    <p>In order to provide distribution capabilities, there is no 1 to 1 correlation of Topic to Log since then each Topic would need to be stored on a single machine. Rather, a Topic is broken into smaller units called <strong>Partitions</strong>.</p>
    <p>Effectively, every Partition is a single Log. Such model allows kafka to distribute a Topic with N partitions to at most N workers and we can have K Consumers under the same Consumer Group sharing the load of consumption as long as LEQ(K, N). If K>N than it means that some consumers will be idle.</p>
    <p>It makes sense from a technical POV. Kafka simply assigns a Partition to a Consumer.</p>
    <ul>
      <li>If the number of Consumers is less than the number of Partitions, by the pigenhole principle there is at least a single Consumers that is assigned with more than one partition</li>
      <li>If the number of Consumers is greather than the number of Partitions, there cannot be a surjective mapping from the Partitions the Consumers</li>
    </ul>
    <h3 id="event">Event</h3>
    <p>A unit of data in a Topic has many interchangeable names - Event, Message, Record. We favour the term Event.</p>
    <blockquote>
      <p>Out of the kafka scope, events in the fotware world are <em>Entities</em> that desribe something that <em>happened in the past</em>. Therefore, event are past tense verbse. Well, it is the same in kafka</p>
    </blockquote>
    <p>An <strong>Event</strong> is a timestamped key-value pair the records something that happened.</p>
    <p>Event is composed of <strong>Headers</strong>, <strong>Keys</strong>, a <strong>Timestamp</strong> and a <strong>Value</strong>. We will cover some of those at a later time but for a very brief overview</p>
    <p><strong>Headers</strong> contain optional metadata about the Event. One can use them to annotate, monitor and audit and Event. This is very like HTTP headers.</p>
    <p><strong>Keys</strong> are optional values that affect how data is distributed accross partitions (Again, this is known concept, think of Partition Keys and partitioning schemes in different distributed systems). We will explore this concept independently.</p>
    <p><strong>Timestamp</strong> holds information about when the thing that happened hapenned. There are multiple semantics of time we can speak of - When the Event created? When was it ingested? When was it processed? This is a whole topic of it's own which we will explore independantly.</p>
    <p><strong>Value</strong> is the content of the message. Practically this is just a byte array and should be serialized according to the application.</p>
    <h2 id="the-cluster">The Cluster</h2>
    <p>TODO: cover concepts below</p>
    <p><strong>Broker</strong> TODO</p>
    <p><strong>Replication</strong> TODO</p>
    <p><strong>Leader</strong> TODO</p>
    <p><strong>Follower</strong> TODO</p>
  </body>
</html>
</div></div></main><footer><div class="Footer_container__Z8cUU"><a href="https://il.linkedin.com/in/tal-glanzman"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a><a href="https://github.com/tglanz"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="25" width="25" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div></footer><script src="/_next/static/chunks/webpack-91d24a11915ed1c5.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/66d0883758355d1f.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:HL[\"/_next/static/css/1cb3813e458884a4.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"5:I[3728,[],\"\"]\n7:I[9928,[],\"\"]\n8:I[5420,[\"326\",\"static/chunks/326-dcee1ff54fa4f70c.js\",\"185\",\"static/chunks/app/layout-679af891320360de.js\"],\"\"]\n9:I[6954,[],\"\"]\na:I[7264,[],\"\"]\nd:I[8326,[\"954\",\"static/chunks/d3ac728e-1e5d8b71e3d43fec.js\",\"326\",\"static/chunks/326-dcee1ff54fa4f70c.js\",\"496\",\"static/chunks/app/articles/%5B...slug%5D/page-44f6caefb92fad34.js\"],\"\"]\ne:T518,"])</script><script>self.__next_f.push([1,"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/66d0883758355d1f.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L5\",null,{\"buildId\":\"PrwyOGkWtyocbEqpUupQH\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/articles/posts/kafka\",\"initialTree\":[\"\",{\"children\":[\"articles\",{\"children\":[[\"slug\",\"posts/kafka\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"posts\\\",\\\"kafka\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L6\"],\"globalErrorComponent\":\"$7\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_d65c78 Layout_body__oXsmr\",\"children\":[[\"$\",\"header\",null,{\"className\":\"Layout_header__XC_Gv\",\"children\":[\"$\",\"$L8\",null,{}]}],[\"$\",\"main\",null,{\"className\":\"Layout_main__luTTh\",\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"initialChildNode\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"initialChildNode\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"articles\",\"children\",[\"slug\",\"posts/kafka\",\"c\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"initialChildNode\":[\"$Lb\",\"$Lc\",null],\"childPropSegment\":\"__PAGE__?{\\\"slug\\\":[\\\"posts\\\",\\\"kafka\\\"]}\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/1cb3813e458884a4.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}],\"childPropSegment\":[\"slug\",\"posts/kafka\",\"c\"],\"styles\":null}],\"childPropSegment\":\"articles\",\"styles\":null}]}],[\"$\",\"footer\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"Footer_container__Z8cUU\",\"children\":[[\"$\",\"$Ld\",null,{\"href\":\"https://il.linkedin.com/in/tal-glanzman\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 448 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":25,\"width\":25,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}],[\"$\",\"$Ld\",null,{\"href\":\"https://github.com/tglanz\",\"children\":[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 496 512\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"$e\",\"children\":\"$undefined\"}]]],\"className\":\"$undefined\",\"style\":{\"color\":\"$undefined\"},\"height\":25,\"width\":25,\"xmlns\":\"http://www.w3.org/2000/svg\"}]}]]}]}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"6:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Article\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Personal site\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"256x256\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"f:I[6222,[\"954\",\"static/chunks/d3ac728e-1e5d8b71e3d43fec.js\",\"326\",\"static/chunks/326-dcee1ff54fa4f70c.js\",\"496\",\"static/chunks/app/articles/%5B...slug%5D/page-44f6caefb92fad34.js\"],\"ArticleContent\"]\n10:Tfc3,"])</script><script>self.__next_f.push([1,"\n# Overview\n\n## What is kafka?\n\n\u003e Kafka is a streamsing platform for ingesting, storing, accessing and processing streams of data\n\n# High level concepts\n\n## Communication model\n\nOn the contrary of a **Directed Communication** where every service is aware of the other process to send messages to, kafka provides a centralized hub in which processes can send and receieve messages without being aware of each other. Such communication model is known as the **Publish/Subscribe** model which enhance the decoupling between different processes.\n\n\u003e Of course those are not termed by kafka\n\n\u003e Recall the different communication formalization according the sync/async and persistent/transient dimensions. Kafka fills conforms to the asynchronous and persisted model. This is unintuitive since this model is usually used for classical **Queues** rather than **Pubsubs**.\n\n## Core components\n\nA **Topic** is a named stream of data (/ channel - CSP?).\n\n**Producer**s are processes that publish data to a Topic.\n\n**Consumer**s are processes that subscribe to data in one or more Topics.\n\nA **Consumer Group** is a set of Consumers that work together as a group.\n\n## Storage\n\n### Commit Log\n\nA **Commit Log** is an append only data structure which contain an *Ordered Sequence* of events (/records)\n\n- Records in the log are immutable\n- Records are ordered and their ordinal is known as their **Offset**\n\n\u003e It is very similiar to existing transaction logs (Redo Log especially) which can be found in classical Relational Databases.\n\n\u003e To gain perspectives we can find similiarities to STM concurrency mode, Redux stores etc...\n\n### Partitions\n\nIn order to provide distribution capabilities, there is no 1 to 1 correlation of Topic to Log since then each Topic would need to be stored on a single machine. Rather, a Topic is broken into smaller units called **Partitions**.\n\nEffectively, every Partition is a single Log. Such model allows kafka to distribute a Topic with N partitions to at most N workers and we can have K Consumers under the same Consumer Group sharing the load of consumption as long as LEQ(K, N). If K\u003eN than it means that some consumers will be idle.\n\nIt makes sense from a technical POV. Kafka simply assigns a Partition to a Consumer.\n\n- If the number of Consumers is less than the number of Partitions, by the pigenhole principle there is at least a single Consumers that is assigned with more than one partition\n- If the number of Consumers is greather than the number of Partitions, there cannot be a surjective mapping from the Partitions the Consumers\n\n### Event\n\nA unit of data in a Topic has many interchangeable names - Event, Message, Record. We favour the term Event.\n\n\u003e Out of the kafka scope, events in the fotware world are *Entities* that desribe something that *happened in the past*. Therefore, event are past tense verbse. Well, it is the same in kafka\n\nAn **Event** is a timestamped key-value pair the records something that happened.\n\nEvent is composed of **Headers**, **Keys**, a **Timestamp** and a **Value**. We will cover some of those at a later time but for a very brief overview\n\n**Headers** contain optional metadata about the Event. One can use them to annotate, monitor and audit and Event. This is very like HTTP headers.\n\n**Keys** are optional values that affect how data is distributed accross partitions (Again, this is known concept, think of Partition Keys and partitioning schemes in different distributed systems). We will explore this concept independently.\n\n**Timestamp** holds information about when the thing that happened hapenned. There are multiple semantics of time we can speak of - When the Event created? When was it ingested? When was it processed? This is a whole topic of it's own which we will explore independantly.\n\n**Value** is the content of the message. Practically this is just a byte array and should be serialized according to the application.\n\n## The Cluster\n\nTODO: cover concepts below\n\n**Broker** TODO\n\n**Replication** TODO\n\n**Leader** TODO\n\n**Follower** TODO\n"])</script><script>self.__next_f.push([1,"11:T1938,"])</script><script>self.__next_f.push([1,"\u003c!doctype html\u003e\n\u003chtml lang=\"en\"\u003e\n  \u003chead\u003e\n    \u003cmeta charset=\"utf-8\"\u003e\n    \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1\"\u003e\n  \u003c/head\u003e\n  \u003cbody\u003e\n    \u003cnav class=\"toc\"\u003e\n      \u003col class=\"toc-level toc-level-1\"\u003e\n        \u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#overview\"\u003eOverview\u003c/a\u003e\n          \u003col class=\"toc-level toc-level-2\"\u003e\n            \u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#what-is-kafka\"\u003eWhat is kafka?\u003c/a\u003e\u003c/li\u003e\n          \u003c/ol\u003e\n        \u003c/li\u003e\n        \u003cli class=\"toc-item toc-item-h1\"\u003e\u003ca class=\"toc-link toc-link-h1\" href=\"#high-level-concepts\"\u003eHigh level concepts\u003c/a\u003e\n          \u003col class=\"toc-level toc-level-2\"\u003e\n            \u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#communication-model\"\u003eCommunication model\u003c/a\u003e\u003c/li\u003e\n            \u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#core-components\"\u003eCore components\u003c/a\u003e\u003c/li\u003e\n            \u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#storage\"\u003eStorage\u003c/a\u003e\u003c/li\u003e\n            \u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#the-cluster\"\u003eThe Cluster\u003c/a\u003e\u003c/li\u003e\n          \u003c/ol\u003e\n        \u003c/li\u003e\n      \u003c/ol\u003e\n    \u003c/nav\u003e\n    \u003ch1 id=\"overview\"\u003eOverview\u003c/h1\u003e\n    \u003ch2 id=\"what-is-kafka\"\u003eWhat is kafka?\u003c/h2\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eKafka is a streamsing platform for ingesting, storing, accessing and processing streams of data\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003ch1 id=\"high-level-concepts\"\u003eHigh level concepts\u003c/h1\u003e\n    \u003ch2 id=\"communication-model\"\u003eCommunication model\u003c/h2\u003e\n    \u003cp\u003eOn the contrary of a \u003cstrong\u003eDirected Communication\u003c/strong\u003e where every service is aware of the other process to send messages to, kafka provides a centralized hub in which processes can send and receieve messages without being aware of each other. Such communication model is known as the \u003cstrong\u003ePublish/Subscribe\u003c/strong\u003e model which enhance the decoupling between different processes.\u003c/p\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eOf course those are not termed by kafka\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eRecall the different communication formalization according the sync/async and persistent/transient dimensions. Kafka fills conforms to the asynchronous and persisted model. This is unintuitive since this model is usually used for classical \u003cstrong\u003eQueues\u003c/strong\u003e rather than \u003cstrong\u003ePubsubs\u003c/strong\u003e.\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003ch2 id=\"core-components\"\u003eCore components\u003c/h2\u003e\n    \u003cp\u003eA \u003cstrong\u003eTopic\u003c/strong\u003e is a named stream of data (/ channel - CSP?).\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eProducer\u003c/strong\u003es are processes that publish data to a Topic.\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eConsumer\u003c/strong\u003es are processes that subscribe to data in one or more Topics.\u003c/p\u003e\n    \u003cp\u003eA \u003cstrong\u003eConsumer Group\u003c/strong\u003e is a set of Consumers that work together as a group.\u003c/p\u003e\n    \u003ch2 id=\"storage\"\u003eStorage\u003c/h2\u003e\n    \u003ch3 id=\"commit-log\"\u003eCommit Log\u003c/h3\u003e\n    \u003cp\u003eA \u003cstrong\u003eCommit Log\u003c/strong\u003e is an append only data structure which contain an \u003cem\u003eOrdered Sequence\u003c/em\u003e of events (/records)\u003c/p\u003e\n    \u003cul\u003e\n      \u003cli\u003eRecords in the log are immutable\u003c/li\u003e\n      \u003cli\u003eRecords are ordered and their ordinal is known as their \u003cstrong\u003eOffset\u003c/strong\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eIt is very similiar to existing transaction logs (Redo Log especially) which can be found in classical Relational Databases.\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eTo gain perspectives we can find similiarities to STM concurrency mode, Redux stores etc...\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003ch3 id=\"partitions\"\u003ePartitions\u003c/h3\u003e\n    \u003cp\u003eIn order to provide distribution capabilities, there is no 1 to 1 correlation of Topic to Log since then each Topic would need to be stored on a single machine. Rather, a Topic is broken into smaller units called \u003cstrong\u003ePartitions\u003c/strong\u003e.\u003c/p\u003e\n    \u003cp\u003eEffectively, every Partition is a single Log. Such model allows kafka to distribute a Topic with N partitions to at most N workers and we can have K Consumers under the same Consumer Group sharing the load of consumption as long as LEQ(K, N). If K\u003eN than it means that some consumers will be idle.\u003c/p\u003e\n    \u003cp\u003eIt makes sense from a technical POV. Kafka simply assigns a Partition to a Consumer.\u003c/p\u003e\n    \u003cul\u003e\n      \u003cli\u003eIf the number of Consumers is less than the number of Partitions, by the pigenhole principle there is at least a single Consumers that is assigned with more than one partition\u003c/li\u003e\n      \u003cli\u003eIf the number of Consumers is greather than the number of Partitions, there cannot be a surjective mapping from the Partitions the Consumers\u003c/li\u003e\n    \u003c/ul\u003e\n    \u003ch3 id=\"event\"\u003eEvent\u003c/h3\u003e\n    \u003cp\u003eA unit of data in a Topic has many interchangeable names - Event, Message, Record. We favour the term Event.\u003c/p\u003e\n    \u003cblockquote\u003e\n      \u003cp\u003eOut of the kafka scope, events in the fotware world are \u003cem\u003eEntities\u003c/em\u003e that desribe something that \u003cem\u003ehappened in the past\u003c/em\u003e. Therefore, event are past tense verbse. Well, it is the same in kafka\u003c/p\u003e\n    \u003c/blockquote\u003e\n    \u003cp\u003eAn \u003cstrong\u003eEvent\u003c/strong\u003e is a timestamped key-value pair the records something that happened.\u003c/p\u003e\n    \u003cp\u003eEvent is composed of \u003cstrong\u003eHeaders\u003c/strong\u003e, \u003cstrong\u003eKeys\u003c/strong\u003e, a \u003cstrong\u003eTimestamp\u003c/strong\u003e and a \u003cstrong\u003eValue\u003c/strong\u003e. We will cover some of those at a later time but for a very brief overview\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eHeaders\u003c/strong\u003e contain optional metadata about the Event. One can use them to annotate, monitor and audit and Event. This is very like HTTP headers.\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eKeys\u003c/strong\u003e are optional values that affect how data is distributed accross partitions (Again, this is known concept, think of Partition Keys and partitioning schemes in different distributed systems). We will explore this concept independently.\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eTimestamp\u003c/strong\u003e holds information about when the thing that happened hapenned. There are multiple semantics of time we can speak of - When the Event created? When was it ingested? When was it processed? This is a whole topic of it's own which we will explore independantly.\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eValue\u003c/strong\u003e is the content of the message. Practically this is just a byte array and should be serialized according to the application.\u003c/p\u003e\n    \u003ch2 id=\"the-cluster\"\u003eThe Cluster\u003c/h2\u003e\n    \u003cp\u003eTODO: cover concepts below\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eBroker\u003c/strong\u003e TODO\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eReplication\u003c/strong\u003e TODO\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eLeader\u003c/strong\u003e TODO\u003c/p\u003e\n    \u003cp\u003e\u003cstrong\u003eFollower\u003c/strong\u003e TODO\u003c/p\u003e\n  \u003c/body\u003e\n\u003c/html\u003e\n"])</script><script>self.__next_f.push([1,"c:[\"$\",\"div\",null,{\"className\":\"article-page_container__5yaZl\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"Kafka\"}],\"$undefined\",[\"$\",\"$Lf\",null,{\"content\":{\"raw\":\"$10\",\"html\":\"$11\"}}]]}]\n"])</script><script>self.__next_f.push([1,""])</script></body></html>